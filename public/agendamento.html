<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendamento - village Residences</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/contato.css">
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="container">
            <div class="nav-brand">
                <h1>
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                        <path d="M12 2L2 7L12 12L22 7L12 2Z" fill="#0F1F4B" stroke="#0F1F4B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 17L12 22L22 17" fill="#0F1F4B" stroke="#0F1F4B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M2 12L12 17L22 12" fill="#0F1F4B" stroke="#0F1F4B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    village Residences
                </h1>
            </div>
            <ul class="nav-menu">
                <li><a href="/">Início</a></li>
                <li><a href="/quartos">Quartos</a></li>
                <li><a href="/reserva">Reservar</a></li>
                <li><a href="/sobre">Sobre</a></li>
                <li><a href="/contato">Contato</a></li>
            </ul>
            <div class="nav-toggle">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
    </nav>

    <!-- Agendamento Section -->
    <section class="contato-hero">
        <div class="container">
            <h1 class="section-title">Agendamento de Serviços</h1>
            <p class="section-subtitle">Agende seu serviço com antecedência</p>
        </div>
    </section>

    <section class="contato-section">
        <div class="container">
            <div class="contato-content">
                <div class="contato-form-container" style="max-width: 800px; margin: 0 auto;">
                    <h2>Preencha os dados para agendamento</h2>
                    <form id="agendamento-form" class="contato-form">
                        <div class="form-group">
                            <label for="full_name">Nome Completo *</label>
                            <input type="text" id="full_name" name="full_name" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-mail *</label>
                            <input type="email" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="phone">Telefone</label>
                            <input type="tel" id="phone" name="phone">
                        </div>
                        <div class="form-group">
                            <label for="service_id">Serviço *</label>
                            <select id="service_id" name="service_id" required>
                                <option value="">Selecione um serviço...</option>
                            </select>
                        </div>
                        <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div class="form-group">
                                <label for="date">Data *</label>
                                <input type="date" id="date" name="date" required>
                            </div>
                            <div class="form-group">
                                <label for="time">Horário *</label>
                                <input type="time" id="time" name="time" required>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="note">Observação (opcional)</label>
                            <textarea id="note" name="note" rows="4"></textarea>
                        </div>
                        <div id="agendamento-error" class="error-message" style="display: none;"></div>
                        <div id="agendamento-success" class="success-message" style="display: none;"></div>
                        <button type="submit" class="btn btn-primary">Agendar</button>
                    </form>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer Premium -->
    <footer class="footer-premium">
        <div class="footer-premium-container">
            <!-- Linha superior decorativa -->
            <div class="footer-divider"></div>
            
            <div class="footer-premium-content">
                <!-- Seção 1: Identidade do Resort -->
                <div class="footer-premium-identity">
                    <h3 class="footer-premium-title">village Residences</h3>
                    <p class="footer-premium-tagline">Seu refúgio exclusivo de luxo em Corumbá</p>
                </div>

                <!-- Seção 2: Links Úteis -->
                <div class="footer-premium-links">
                    <div class="footer-links-column">
                        <a href="/" class="footer-link">Início</a>
                        <a href="/quartos" class="footer-link">Quartos</a>
                        <a href="/sobre" class="footer-link">Estrutura</a>
                    </div>
                    <div class="footer-links-column">
                        <a href="/reserva" class="footer-link">Reservas</a>
                        <a href="/contato" class="footer-link">Contato</a>
                    </div>
                </div>

                <!-- Seção 3: Contato Premium -->
                <div class="footer-premium-contact">
                    <div class="footer-contact-item">
                        <svg class="footer-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M22 16.92V19.92C22.0011 20.1985 21.9441 20.4742 21.8325 20.7292C21.7209 20.9842 21.5573 21.2126 21.3523 21.3992C21.1473 21.5857 20.9053 21.7262 20.6429 21.8117C20.3805 21.8971 20.1036 21.9256 19.83 21.895C16.7428 21.5356 13.787 20.5301 11.19 18.96C8.77382 17.5546 6.72533 15.5061 5.32 13.09C3.74996 10.4922 2.74449 7.53587 2.385 4.448C2.35441 4.17451 2.38284 3.89757 2.46821 3.63519C2.55359 3.37282 2.69398 3.1309 2.88043 2.926C3.06687 2.7211 3.29522 2.55757 3.55015 2.44607C3.80508 2.33457 4.08079 2.27766 4.36 2.279H7.36C7.96282 2.279 8.54113 2.51857 8.96351 2.94096C9.3859 3.36334 9.62547 3.94165 9.62547 4.544C9.62547 5.14635 9.3859 5.72466 8.96351 6.14704C8.54113 6.56943 7.96282 6.809 7.36 6.809C7.36 8.5 7.89 10.09 8.79 11.39C9.69 12.69 10.89 13.89 12.19 14.79C13.49 15.69 15.09 16.22 16.78 16.22C17.3824 16.22 17.9607 16.4596 18.3831 16.8819C18.8054 17.3043 19.045 17.8826 19.045 18.485V21.485C19.045 22.0874 18.8054 22.6657 18.3831 23.0881C17.9607 23.5104 17.3824 23.75 16.78 23.75H13.78" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>67 992282850</span>
                    </div>
                    <div class="footer-contact-item">
                        <svg class="footer-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="L22 6L12 13L2 6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>luizmarcosramires@hotmail.com</span>
                    </div>
                    <div class="footer-contact-item">
                        <svg class="footer-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 10C21 17 12 23 12 23C12 23 3 17 3 10C3 7.61305 3.94821 5.32387 5.63604 3.63604C7.32387 1.94821 9.61305 1 12 1C14.3869 1 16.6761 1.94821 18.364 3.63604C20.0518 5.32387 21 7.61305 21 10Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 13C13.6569 13 15 11.6569 15 10C15 8.34315 13.6569 7 12 7C10.3431 7 9 8.34315 9 10C9 11.6569 10.3431 13 12 13Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                        <span>Corumbá — Brasil</span>
                    </div>
                </div>
            </div>

            <!-- Seção 4: Redes Sociais -->
            <div class="footer-premium-social">
                <a href="https://wa.me/5567992282850" class="footer-social-link" aria-label="WhatsApp">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M17.472 14.382C17.382 14.282 15.388 12.651 15.038 12.382C14.698 12.113 14.458 12.023 14.178 12.293C13.908 12.563 12.978 13.413 12.748 13.673C12.518 13.933 12.288 13.993 11.968 13.723C11.648 13.453 10.598 12.923 9.348 11.833C8.398 10.983 7.708 9.983 7.478 9.653C7.248 9.323 7.418 9.153 7.598 8.973C7.768 8.793 7.938 8.543 8.108 8.333C8.278 8.123 8.348 7.963 8.478 7.723C8.608 7.483 8.548 7.273 8.458 7.093C8.368 6.913 7.508 5.203 7.258 4.593C7.018 3.993 6.768 4.073 6.578 4.063C6.388 4.053 6.168 4.053 5.958 4.053C5.748 4.053 5.478 4.123 5.238 4.383C4.998 4.643 4.428 5.193 4.428 6.183C4.428 7.173 5.208 8.123 5.318 8.293C5.428 8.463 6.788 10.893 9.138 12.143C10.558 12.873 11.678 13.273 12.498 13.563C13.118 13.783 13.678 13.963 14.078 14.103C14.508 14.253 14.888 14.213 15.198 14.143C15.508 14.073 16.478 13.473 16.698 12.823C16.918 12.173 16.918 11.583 16.828 11.423C16.738 11.263 16.648 11.273 16.468 11.333C16.288 11.393 14.828 11.893 14.528 11.983C14.228 12.073 14.008 12.113 13.908 12.283C13.808 12.453 13.878 12.633 13.968 12.783C14.058 12.933 14.148 13.073 14.238 13.213C14.328 13.353 14.418 13.493 14.528 13.643C14.638 13.793 14.728 13.923 14.848 14.103C14.968 14.283 15.058 14.363 15.198 14.393C15.338 14.423 15.508 14.393 15.668 14.323C15.828 14.253 16.688 13.823 16.978 13.363C17.278 12.893 17.478 12.423 17.538 12.003C17.598 11.583 17.598 11.213 17.558 11.093C17.518 10.973 17.472 10.923 17.472 10.883L17.472 14.382Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </a>
            </div>

            <!-- Linha final de direitos autorais -->
            <div class="footer-premium-copyright">
                <p>&copy; 2024 village Residences. Todos os direitos reservados.</p>
            </div>
        </div>
    </footer>

    <script src="js/main.js"></script>
    <script>
        // Carregar serviços
        async function loadServices() {
            try {
                const response = await fetch('/api/services');
                const services = await response.json();
                const select = document.getElementById('service_id');
                
                services.forEach(service => {
                    const option = document.createElement('option');
                    option.value = service.id;
                    option.textContent = `${service.name} - R$ ${parseFloat(service.price).toFixed(2)}`;
                    select.appendChild(option);
                });
            } catch (error) {
                console.error('Erro ao carregar serviços:', error);
            }
        }

        // Formulário de agendamento
        document.getElementById('agendamento-form').addEventListener('submit', async (e) => {
            e.preventDefault();

            const errorDiv = document.getElementById('agendamento-error');
            const successDiv = document.getElementById('agendamento-success');
            errorDiv.style.display = 'none';
            successDiv.style.display = 'none';

            const formData = {
                full_name: document.getElementById('full_name').value,
                email: document.getElementById('email').value,
                phone: document.getElementById('phone').value,
                service_id: parseInt(document.getElementById('service_id').value),
                date: document.getElementById('date').value,
                time: document.getElementById('time').value,
                note: document.getElementById('note').value
            };

            try {
                const response = await fetch('/api/appointments', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();

                if (response.ok) {
                    successDiv.textContent = 'Agendamento realizado com sucesso!';
                    successDiv.style.display = 'block';
                    document.getElementById('agendamento-form').reset();
                } else {
                    errorDiv.textContent = data.error || 'Erro ao realizar agendamento';
                    errorDiv.style.display = 'block';
                }
            } catch (error) {
                errorDiv.textContent = 'Erro ao realizar agendamento. Tente novamente.';
                errorDiv.style.display = 'block';
            }
        });

        // Data mínima = hoje
        document.getElementById('date').min = new Date().toISOString().split('T')[0];

        loadServices();
    </script>
</body>
</html>

